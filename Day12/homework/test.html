<!-- <!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <script src="app.js"></script>

    <title>To Do List</title>
</head>

<body>
    <header class="bg-success text-white p-5">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12">
                    <font face="Comic sans MS" size="11" color="black">
                        <strong>ToDo List</strong>
                    </font>

                </div>
            </div>
        </div>
    </header>

    <div class="container mt-3">
        <h2>Add Items</h2>

        <label id="lblsuccess" class="text-success" style="display: none;">
        </label>

        <form id="addForm">
            <div class="row">
                <div class="col-lg-7 col-md-7 col-sm-7">

                    <input type="text" onkeyup="toggleButton(this, 'submit')" class="form-control" id="item">
                </div>

                <div class="col-lg-5 col-md-5 col-sm-5">
                    <input type="submit" class="btn btn-dark" id="submit" value="Submit" disabled>
                </div>
            </div>
        </form>

        <h3 class="mt-4">Tasks</h3>

        <form id="addForm">
            <ul class="list-group" id="items"></ul>
        </form>
    </div>
</body>

</html>
<script>
    window.onload = () => {
        const form1 = document.querySelector("#addForm");
    
        let items = document.getElementById("items");
        let submit = document.getElementById("submit");
    
        let editItem = null;
    
        form1.addEventListener("submit", addItem);
        items.addEventListener("click", removeItem);
    };
    
    function addItem(e) {
        e.preventDefault();
    
        if (submit.value != "Submit") {
            console.log("Hello");
    
            editItem.target.parentNode.childNodes[0].data
                = document.getElementById("item").value;
    
            submit.value = "Submit";
            document.getElementById("item").value = "";
    
            document.getElementById("lblsuccess").innerHTML
                = "Text edited successfully";
    
            document.getElementById("lblsuccess")
                            .style.display = "block";
    
            setTimeout(function() {
                document.getElementById("lblsuccess")
                                .style.display = "none";
            }, 3000);
    
            return false;
        }
    
        let newItem = document.getElementById("item").value;
        if (newItem.trim() == "" || newItem.trim() == null)
            return false;
        else
            document.getElementById("item").value = "";
    
        let li = document.createElement("li");
        li.className = "list-group-item";
    
        let deleteButton = document.createElement("button");
    
        deleteButton.className = 
            "btn-danger btn btn-sm float-right delete";
    
        deleteButton.appendChild(document.createTextNode("Delete"));
    
        let editButton = document.createElement("button");
    
        editButton.className = 
                "btn-success btn btn-sm float-right edit";
    
        editButton.appendChild(document.createTextNode("Edit"));
    
        li.appendChild(document.createTextNode(newItem));
        li.appendChild(deleteButton);
        li.appendChild(editButton);
    
        items.appendChild(li);
    }
    
    function removeItem(e) {
        e.preventDefault();
        if (e.target.classList.contains("delete")) {
            if (confirm("Are you Sure?")) {
                let li = e.target.parentNode;
                items.removeChild(li);
                document.getElementById("lblsuccess").innerHTML
                    = "Text deleted successfully";
    
                document.getElementById("lblsuccess")
                            .style.display = "block";
    
                setTimeout(function() {
                    document.getElementById("lblsuccess")
                            .style.display = "none";
                }, 3000);
            }
        }
        if (e.target.classList.contains("edit")) {
            document.getElementById("item").value =
                e.target.parentNode.childNodes[0].data;
            submit.value = "EDIT";
            editItem = e;
        }
    }
    
    function toggleButton(ref, btnID) {
        document.getElementById(btnID).disabled = false;
    }
    
</script> -->

<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="form">
        <div class="menu-title">
            <div class="left-title">
                <img src="icons8-list-24.png" alt=""> <h2>To Do List</h2>
            </div>
            <div class="right-title">
                <h2>All</h2>
                <h2>Done</h2>
                <h2>Undone</h2>
            </div>
            
           
        </div>
       
        <div class="input-container">
           
            <input class ="user-input" type="text" placeholder="Add a new task">
            <input class="date" type="date">
            <input class="time" type="time">
            <button onclick="addTask()" class="add" id="add">Add</button>
        </div>
       
       </div>
       <div class="list"></div>
       <script src="main.js"></script>
</body>
</html> -->

 <!DOCTYPE html>
 <html lang="en">
 
 <head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>To Do List</title>
     <style>
         /* Your CSS styles here */
     </style>
 </head>
 
 <body>
     <header class="bg-success text-white p-5">
         <div class="container">
             <div class="row">
                 <div class="col-lg-12 col-md-12 col-sm-12">
                     <font face="Comic sans MS" size="11" color="black">
                         <strong>ToDo List</strong>
                     </font>
                 </div>
             </div>
         </div>
     </header>
 
     <div class="container mt-3">
         <h2>Add Items</h2>
 
         <label id="lblsuccess" class="text-success" style="display: none;"></label>
 
         <form id="addForm">
             <div class="row">
                 <div class="col-lg-7 col-md-7 col-sm-7">
                     <input type="text" class="form-control" id="item" required>
                 </div>
 
                 <div class="col-lg-5 col-md-5 col-sm-5">
                     <input type="submit" class="btn btn-dark" id="submit" value="Submit">
                 </div>
             </div>
         </form>
 
         <h3 class="mt-4">Tasks</h3>
 
         <ul class="list-group" id="items"></ul>
     </div>
 
     <script>
         window.onload = () => {
             const form = document.querySelector("#addForm");
             const itemsList = document.getElementById("items");
             const submitButton = document.getElementById("submit");
 
             // Load danh sách từ Local Storage khi trang được tải
             loadItemsFromLocalStorage();
 
             form.addEventListener("submit", addItem);
 
             function addItem(event) {
                 event.preventDefault();
 
                 const newItemInput = document.getElementById("item");
                 const newItemText = newItemInput.value.trim();
                 if (newItemText === "") return;
 
                 if (submitButton.value !== "Submit") {
                     // Edit item
                     const editedItem = document.querySelector(".edit-mode");
                     editedItem.textContent = newItemText;
                     editedItem.classList.remove("edit-mode");
                     submitButton.value = "Submit";
                     newItemInput.value = "";
                 } else {
                     // Add new item
                     const newItem = document.createElement("li");
                     newItem.textContent = newItemText;
                     newItem.className = "list-group-item";
                     newItem.innerHTML += `
                         <button class="btn btn-danger btn-sm float-right delete">Delete</button>
                         <button class="btn btn-success btn-sm float-right edit">Edit</button>
                     `;
                     itemsList.appendChild(newItem);
                     newItemInput.value = "";
                 }
 
                 // Lưu danh sách vào Local Storage sau khi thêm/chỉnh sửa một mục
                 saveItemsToLocalStorage();
             }
 
             itemsList.addEventListener("click", handleItemClick);
             function handleItemClick(event) {
                if (event.target.classList.contains("delete")) {
                    // Remove item from HTML
                    const listItem = event.target.parentElement;
                    listItem.remove();
                    
                    // Get the index of the item just removed
                    const index = Array.from(itemsList.children).indexOf(listItem);
                    
                    // Get the current items list from localStorage
                    const savedItems = localStorage.getItem("todoItems");
                    
                    if (savedItems) {
                        // Parse the JSON string into an array
                        let itemsArray = JSON.parse(savedItems);
                        
                        // Remove the corresponding item from the array
                        itemsArray.splice(index, 1);
                        
                        // Save the updated array back to localStorage
                        localStorage.setItem("todoItems", JSON.stringify(itemsArray));
            
                        // Update itemsList variable to reflect the changes
                        itemsList.innerHTML = ""; // Clear the items list
                        itemsArray.forEach(item => {
                            const newItem = document.createElement("li");
                            newItem.textContent = item;
                            newItem.className = "list-group-item";
                            newItem.innerHTML += `
                                <button class="btn btn-danger btn-sm float-right delete">Delete</button>
                                <button class="btn btn-success btn-sm float-right edit">Edit</button>
                            `;
                            itemsList.appendChild(newItem);
                        });
                    }
                } else if (event.target.classList.contains("edit")) {
                    // Edit item
                    const listItem = event.target.parentElement;
                    const itemText = listItem.textContent.trim();
                    const newItemInput = document.getElementById("item");
                    newItemInput.value = itemText;
                    submitButton.value = "Edit";
                    listItem.classList.add("edit-mode");
                }
            }
            
             function saveItemsToLocalStorage() {
                 const itemsHTML = itemsList.innerHTML;
                 localStorage.setItem("todoItems", itemsHTML);
             }
 
             function loadItemsFromLocalStorage() {
                 const savedItems = localStorage.getItem("todoItems");
                 if (savedItems) {
                     itemsList.innerHTML = savedItems;
                 }
             }
         };
     </script>
 </body>
 
 </html>
 